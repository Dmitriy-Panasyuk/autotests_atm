# Autotests

Внимание! Описание может и будет меняться с ходом разработки.

## Описание

Программа предназначена для тестирования платформы "Атмосфера". Проект содержит как готовые тестовые кейсы и их структурные части, так и инструментарий для создания новых кейсов.

## Структура

Структура проекта разделена на две глобальные части:

- Инструментарий (пакет main)
- Тесты (пакет test)

#### Инструментарий
Содержит классы предназначенные для описания страниц и их элементов и методы для извлечения их параметров.
Пакет common содержит классы позволяющие работать с браузером и конфигурацию его запуска.
Пакет pages содержит описания страниц и их содержимого. 
Пакет elements содержит инструменты для поиска элементов описанных в классах страниц.
Пакет roles содержит данные тестовых пользователей.
Пакет utils содержит инструменты для создания отчетов, логирования, работы с БД итд.

#### Тесты
Пакет test содержит наборы и классы тестовых кейсов.

## Запуск тестов

#### IDE
Предпочитаемый способ запуска из под IDE - "mvn test".

#### Docker image

Docker использует два образа dist и tests.
dist (Dockerfile_dist) содержит дистрибутивы необходимые для запуска тестов - linux, chrome, allure итд. test должен содержать
https://***/168/repositories/autotest-dist

tests (Dockerfile_tests) пересобирается каждый раз при запуске и содержит актуальную версию тестов.

Наборы тестов реегулируются переменной среды TEST_SUITE (smoke или e2e, любое другое запустит весь набор). 

## Pipeline

Автоматический запуск настраивается в gitlab-ci.yml


## Генерация отчетов Allure

Для генерации отчетов необходимо установить Allure Report (https://github.com/allure-framework/allure2/releases/tag/2.30.0) и указать ссылку на файл allure в папке bin в константе ALLURE_REPORT_PATH в классе Constant.
Генерация репортов происходит автоматически после завершения тестирования.
